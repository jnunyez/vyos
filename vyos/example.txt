set firewall all-ping 'enable'
set firewall broadcast-ping 'disable'
set firewall config-trap 'disable'
set firewall group address-group IPSECPEERS address '192.168.242.42'
set firewall group network-group FB network '192.168.40.0/29'
set firewall group network-group ROADWARRIORS network '192.168.40.16/29'
set firewall ip-src-route 'disable'
set firewall ipv6-receive-redirects 'disable'
set firewall ipv6-src-route 'disable'
set firewall log-martians 'enable'
set firewall name GRE_IN default-action 'accept'
set firewall name GRE_LOCAL default-action 'accept'
set firewall name WAN_IN default-action 'drop'
set firewall name WAN_IN rule 10 action 'accept'
set firewall name WAN_IN rule 10 state established 'enable'
set firewall name WAN_IN rule 10 state related 'enable'
set firewall name WAN_IN rule 20 action 'drop'
set firewall name WAN_IN rule 20 state invalid 'enable'
set firewall name WAN_IN rule 30 action 'accept'
set firewall name WAN_IN rule 30 protocol 'icmp'
set firewall name WAN_IN rule 40 action 'accept'
set firewall name WAN_IN rule 40 description 'Roadwarrior FB user'
set firewall name WAN_IN rule 40 destination address '192.168.52.5/32'
set firewall name WAN_IN rule 40 destination port '80,3000,6082'
set firewall name WAN_IN rule 40 protocol 'tcp'
set firewall name WAN_IN rule 40 source group network-group 'FB'
set firewall name WAN_IN rule 50 action 'accept'
set firewall name WAN_IN rule 50 description 'Roadwarrior for rest of users'
set firewall name WAN_IN rule 50 destination address '192.168.52.0/24'
set firewall name WAN_IN rule 50 destination port '6082,5000,80,22,3000,5601'
set firewall name WAN_IN rule 50 protocol 'tcp'
set firewall name WAN_IN rule 50 source group network-group 'ROADWARRIORS'
set firewall name WAN_LOCAL default-action 'drop'
set firewall name WAN_LOCAL rule 10 action 'accept'
set firewall name WAN_LOCAL rule 10 state established 'enable'
set firewall name WAN_LOCAL rule 10 state related 'enable'
set firewall name WAN_LOCAL rule 20 action 'drop'
set firewall name WAN_LOCAL rule 20 state invalid 'enable'
set firewall name WAN_LOCAL rule 30 action 'accept'
set firewall name WAN_LOCAL rule 30 protocol 'icmp'
set firewall name WAN_LOCAL rule 40 action 'accept'
set firewall name WAN_LOCAL rule 40 destination port '20001'
set firewall name WAN_LOCAL rule 40 protocol 'tcp'
set firewall name WAN_LOCAL rule 50 action 'accept'
set firewall name WAN_LOCAL rule 50 description 'IKE'
set firewall name WAN_LOCAL rule 50 destination port '500'
set firewall name WAN_LOCAL rule 50 protocol 'udp'
set firewall name WAN_LOCAL rule 60 action 'accept'
set firewall name WAN_LOCAL rule 60 description 'NONESP'
set firewall name WAN_LOCAL rule 60 destination port '4500'
set firewall name WAN_LOCAL rule 60 protocol 'udp'
set firewall name WAN_LOCAL rule 70 action 'accept'
set firewall name WAN_LOCAL rule 70 ipsec match-ipsec
set firewall name WAN_LOCAL rule 70 source group network-group 'ROADWARRIORS'
set firewall name WAN_LOCAL rule 90 action 'accept'
set firewall name WAN_LOCAL rule 90 ipsec match-ipsec
set firewall name WAN_LOCAL rule 90 protocol 'gre'
set firewall name WAN_LOCAL rule 90 source group address-group 'IPSECPEERS'
set firewall receive-redirects 'disable'
set firewall send-redirects 'enable'
set firewall source-validation 'disable'
set firewall syn-cookies 'enable'
set firewall twa-hazards-protection 'disable'
set interfaces ethernet eth0 address 'dhcp'
set interfaces ethernet eth0 description 'mgmt'
set interfaces ethernet eth0 duplex 'auto'
set interfaces ethernet eth0 hw-id '52:54:00:67:5c:05'
set interfaces ethernet eth0 smp-affinity 'auto'
set interfaces ethernet eth0 speed 'auto'
set interfaces ethernet eth1 address '200.48.5.235/29'
set interfaces ethernet eth1 description 'WAN'
set interfaces ethernet eth1 duplex 'auto'
set interfaces ethernet eth1 firewall in name 'WAN_IN'
set interfaces ethernet eth1 firewall local name 'WAN_LOCAL'
set interfaces ethernet eth1 hw-id '52:54:00:d9:00:d6'
set interfaces ethernet eth1 smp-affinity 'auto'
set interfaces ethernet eth1 speed 'auto'
set interfaces ethernet eth2 address '192.168.8.31/24'
set interfaces ethernet eth2 description 'local2int'
set interfaces ethernet eth2 duplex 'auto'
set interfaces ethernet eth2 hw-id '52:54:00:6e:23:5c'
set interfaces ethernet eth2 smp-affinity 'auto'
set interfaces ethernet eth2 speed 'auto'
set interfaces ethernet eth3 address '192.168.52.31/24'
set interfaces ethernet eth3 description 'dashboardstoint'
set interfaces ethernet eth3 duplex 'auto'
set interfaces ethernet eth3 hw-id '52:54:00:cf:da:fd'
set interfaces ethernet eth3 smp-affinity 'auto'
set interfaces ethernet eth3 speed 'auto'
set interfaces loopback lo address '192.168.242.43/32'
set interfaces tunnel tun1 address '10.242.242.5/30'
set interfaces tunnel tun1 description 'GRE PERU-BCN'
set interfaces tunnel tun1 encapsulation 'gre'
set interfaces tunnel tun1 firewall in name 'GRE_IN'
set interfaces tunnel tun1 firewall local name 'GRE_LOCAL'
set interfaces tunnel tun1 ip ospf dead-interval '40'
set interfaces tunnel tun1 ip ospf hello-interval '10'
set interfaces tunnel tun1 ip ospf network 'broadcast'
set interfaces tunnel tun1 ip ospf priority '1'
set interfaces tunnel tun1 ip ospf retransmit-interval '5'
set interfaces tunnel tun1 ip ospf transmit-delay '1'
set interfaces tunnel tun1 local-ip '192.168.242.43'
set interfaces tunnel tun1 mtu '1398'
set interfaces tunnel tun1 multicast 'disable'
set interfaces tunnel tun1 remote-ip '192.168.242.42'
set nat source rule 10 destination address '192.168.50.0/24'
set nat source rule 10 exclude
set nat source rule 10 outbound-interface 'eth1'
set nat source rule 15 destination address '192.168.242.42/32'
set nat source rule 15 exclude
set nat source rule 15 outbound-interface 'any'
set nat source rule 100 outbound-interface 'eth1'
set nat source rule 100 translation address 'masquerade'
set nat source rule 120 outbound-interface 'eth3'
set nat source rule 120 translation address 'masquerade'
set protocols ospf area 0 area-type normal
set protocols ospf area 0 network '10.242.242.4/30'
set protocols ospf parameters abr-type 'cisco'
set protocols ospf parameters router-id '200.48.5.235'
set protocols ospf passive-interface 'default'
set protocols ospf passive-interface-exclude 'tun1'
set protocols static route 0.0.0.0/0 next-hop 200.48.5.233 distance '1'
set service dns forwarding listen-address '0.0.0.0'
set service dns forwarding name-server '200.48.0.50'
set service dns forwarding name-server '200.48.0.51'
set service ssh port '20001'
set system config-management commit-revisions '100'
set system host-name 'peru-ipt-router'
set system login user ipt authentication encrypted-password '$6$uMD/3bJJR$9/w0Bzlpf15Trn6MRmQtqPvpIi9TZy01JjecOsWbWqS1qRHhQ5D7Dfm5pxsY0m7htu.rX12I8lYo.Y1uMq5NB0'
set system login user ipt authentication plaintext-password ''
set system login user ipt level 'operator'
set system login user vagrant authentication encrypted-password '$6$.CxHsukxoC$Nsl7yPxH7DzrYyulwdzpaaLv8tENdSc.yFOPtrxyiREnFpTigShpZJMxQ96gqEM6JEvoVI9laNeN70z5sPhIl/'
set system login user vagrant authentication plaintext-password ''
set system login user vagrant authentication public-keys identifier key 'AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ=='
set system login user vagrant authentication public-keys identifier type 'ssh-rsa'
set system login user vagrant level 'admin'
set system login user vyos authentication encrypted-password '$6$twxDe777xVt43$YJFSIPqc5pjZQna1D7.fdYov.4ojwD1oCj5P8o8SISZ7dd/9LUONqKRVvv73f11yOVGeMvTPs/CfX9uZ0yENq/'
set system login user vyos authentication plaintext-password ''
set system login user vyos level 'admin'
set system name-server '8.8.8.8'
set system ntp server 0.pool.ntp.org
set system ntp server 1.pool.ntp.org
set system ntp server 2.pool.ntp.org
set system syslog global facility all level 'info'
set system syslog global facility protocols level 'debug'
set system task-scheduler task renewCert executable path '/config/user-data/renewcert.sh'
set system task-scheduler task renewCert interval '7d'
set system time-zone 'UTC'
set vpn ipsec auto-update '60'
set vpn ipsec esp-group AES256 compression 'disable'
set vpn ipsec esp-group AES256 lifetime '3600'
set vpn ipsec esp-group AES256 mode 'tunnel'
set vpn ipsec esp-group AES256 pfs 'enable'
set vpn ipsec esp-group AES256 proposal 1 encryption 'aes128'
set vpn ipsec esp-group AES256 proposal 1 hash 'sha1'
set vpn ipsec ike-group IKE256 dead-peer-detection action 'restart'
set vpn ipsec ike-group IKE256 dead-peer-detection interval '15'
set vpn ipsec ike-group IKE256 dead-peer-detection timeout '30'
set vpn ipsec ike-group IKE256 ikev2-reauth 'no'
set vpn ipsec ike-group IKE256 key-exchange 'ikev2'
set vpn ipsec ike-group IKE256 lifetime '28800'
set vpn ipsec ike-group IKE256 proposal 1 dh-group '14'
set vpn ipsec ike-group IKE256 proposal 1 encryption 'aes256'
set vpn ipsec ike-group IKE256 proposal 1 hash 'sha1'
set vpn ipsec include-ipsec-conf '/config/user-data/roadwarrior.conf'
set vpn ipsec include-ipsec-secrets '/config/user-data/roadwarrior.secrets'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org authentication id '@edgePERU'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org authentication mode 'rsa'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org authentication remote-id '@edgeBCN'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org authentication rsa-key-name 'BCN_KEY'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org connection-type 'initiate'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org force-encapsulation 'enable'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org ike-group 'IKE256'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org ikev2-reauth 'inherit'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org local-address 'any'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org tunnel 1 allow-nat-networks 'disable'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org tunnel 1 allow-public-networks 'disable'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org tunnel 1 esp-group 'AES256'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org tunnel 1 local prefix '192.168.242.43/32'
set vpn ipsec site-to-site peer vortex2vortex.duckdns.org tunnel 1 remote prefix '192.168.242.42/32'
set vpn rsa-keys local-key file '/config/ipsec.d/rsa-keys/localhost.key'
set vpn rsa-keys rsa-key-name BCN_KEY rsa-key '0sAwEAAbhkL9SRdU79CNTcvJxilD+rGVU7DGjBzugCWIosMcI6gAS4kezpnrI19VRCUcq3alsvJ3NwoER3QXYpXFpLZW97xBS6WQGJM4i/DyCqJ8fxFQT8NyhCXCKd4SbfbYIi2JSJmA/sh31MUPh+Pa3xygcCpA6QzM/jGplrqeZW/CSrhL5OGiKQwe9Z9UB6Gupn+lx9kUworX7cX8xEbQjWUkWXESYU/eke2nRUevVbUsYHbiQuG+uR8w54NSZFUlFu4HNLF5f0Uj178ahqpsc3VnuQW9jKi/pqlQ3ZLjtO8ekPBPqnPn99Ql++TX1wLpDWyuvHQBrHkD9jLC5QEG9iIveWyaiXjjz8lwZ8+kv1OqqDfrybHrYbqGbVHjKDFwHDG1Z2XfLjyQzG2kSXfDo4M/XzcS7pfgueMQaruyhUhT3TsaJx1GEKgTtBDsLGlVEYf/cKroWtlT1lZFfwWhTtOxeMJkh9UmV53BwNzU/8eMxSFUzumvVonyzFefT9u3M0SEqCLYAZWg1QkJbvLEoupgehgpmf9vS34uXxc0e1B8C9byDbjdlppPQ6gXngORuwTfid9ebbwBS/3uapSwPHC1vOMhmDJP1cwQKGqFw/HkWmXnEMXu0+/uQQftBwTLsivnQwB7fCbBpSXD/wdHON4uU7gQnOXh3xKsMMhbG3Le0j'
